{
  "id": "sei-defi-monitoring-workflow",
  "name": "Sei DeFi Portfolio Monitoring",
  "description": "Monitor SEI token balance and perform automated DeFi operations on Sei Network",
  "version": 1,
  "active": true,
  "tags": ["sei", "defi", "monitoring", "automation", "demo"],
  "nodes": [
    {
      "id": "initial-balance-check",
      "type": "AI_AGENT",
      "position": { "x": 100, "y": 100 },
      "data": {
        "config": {
          "systemPrompt": "You are a Sei Network DeFi assistant. Use the available tools to help users manage their DeFi portfolio.",
          "tools": ["get_sei_balance", "get_sei_network_info"],
          "maxSteps": 5,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Check my current SEI balance and get network information for DeFi monitoring"
        },
        "label": "Initial Portfolio Check"
      }
    },
    {
      "id": "analyze-balance",
      "type": "AI_AGENT",
      "position": { "x": 300, "y": 100 },
      "data": {
        "config": {
          "systemPrompt": "You are a DeFi analyst. Analyze user balances and provide recommendations.",
          "tools": [],
          "maxSteps": 3,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Analyze the balance data: {{initial-balance-check.response}}. Determine if the balance is above {{minBalanceThreshold}} SEI. If yes, recommend DeFi strategies. If no, suggest ways to increase holdings."
        },
        "label": "Analyze Balance & Strategy"
      }
    },
    {
      "id": "estimate-transaction-costs",
      "type": "AI_AGENT",
      "position": { "x": 500, "y": 100 },
      "data": {
        "config": {
          "systemPrompt": "You are a Sei Network assistant. Use the available tools to help users with transaction cost estimation.",
          "tools": ["estimate_sei_gas"],
          "maxSteps": 5,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Estimate gas costs for a sample DeFi transaction - sending {{transactionAmount}} SEI to a DeFi contract address {{defiContractAddress}}"
        },
        "label": "Estimate DeFi Gas Costs"
      }
    },
    {
      "id": "risk-assessment",
      "type": "AI_AGENT",
      "position": { "x": 100, "y": 300 },
      "data": {
        "config": {
          "systemPrompt": "You are a DeFi risk analyst. Assess risks and provide safety recommendations.",
          "tools": [],
          "maxSteps": 3,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Based on the balance analysis {{analyze-balance.response}} and gas estimates {{estimate-transaction-costs.response}}, assess the risks of DeFi operations. Consider: 1) Gas cost impact on portfolio, 2) Available balance for operations, 3) Network congestion risks. Provide safety recommendations."
        },
        "label": "DeFi Risk Assessment"
      }
    },
    {
      "id": "conditional-action",
      "type": "AI_AGENT",
      "position": { "x": 300, "y": 300 },
      "data": {
        "config": {
          "systemPrompt": "You are a Sei Network DeFi assistant. Based on analysis, decide whether to proceed with DeFi operations.",
          "tools": ["send_sei_transaction"],
          "maxSteps": 5,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Based on the risk assessment {{risk-assessment.response}}, if conditions are favorable (sufficient balance, reasonable gas costs, low risk), send {{transactionAmount}} SEI to the DeFi contract {{defiContractAddress}}. If conditions are unfavorable, explain why and suggest alternatives."
        },
        "label": "Conditional DeFi Action"
      }
    },
    {
      "id": "post-action-verification",
      "type": "AI_AGENT",
      "position": { "x": 500, "y": 300 },
      "data": {
        "config": {
          "systemPrompt": "You are a Sei Network assistant. Verify transaction results and check updated balances.",
          "tools": ["get_sei_balance", "get_sei_transaction"],
          "maxSteps": 5,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Verify the DeFi action results from {{conditional-action.response}}. If a transaction was sent, get its details and check my updated balance. If no transaction was made, just check current balance."
        },
        "label": "Post-Action Verification"
      }
    },
    {
      "id": "portfolio-report",
      "type": "AI_AGENT",
      "position": { "x": 300, "y": 500 },
      "data": {
        "config": {
          "systemPrompt": "You are a DeFi portfolio manager. Create comprehensive portfolio reports.",
          "tools": [],
          "maxSteps": 3,
          "provider": "openrouter",
          "model": "meta-llama/llama-3.1-70b-instruct"
        },
        "inputs": {
          "prompt": "Create a comprehensive DeFi portfolio report including: initial state {{initial-balance-check.response}}, analysis {{analyze-balance.response}}, risk assessment {{risk-assessment.response}}, actions taken {{conditional-action.response}}, and final verification {{post-action-verification.response}}. Include recommendations for next steps."
        },
        "label": "Generate Portfolio Report"
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "initial-balance-check",
      "target": "analyze-balance",
      "type": "default"
    },
    {
      "id": "e2",
      "source": "analyze-balance",
      "target": "estimate-transaction-costs",
      "type": "default"
    },
    {
      "id": "e3",
      "source": "estimate-transaction-costs",
      "target": "risk-assessment",
      "type": "default"
    },
    {
      "id": "e4",
      "source": "risk-assessment",
      "target": "conditional-action",
      "type": "default"
    },
    {
      "id": "e5",
      "source": "conditional-action",
      "target": "post-action-verification",
      "type": "default"
    },
    {
      "id": "e6",
      "source": "post-action-verification",
      "target": "portfolio-report",
      "type": "default"
    }
  ],
  "metadata": {
    "createdAt": "2025-01-31T10:00:00Z",
    "updatedAt": "2025-01-31T10:00:00Z",
    "category": "demo",
    "difficulty": "advanced",
    "estimatedDuration": "3-5 minutes",
    "requirements": [
      "Sei Network MCP server configured",
      "Sufficient SEI balance for testing",
      "Understanding of DeFi concepts and risks"
    ],
    "description": "This advanced workflow demonstrates automated DeFi portfolio monitoring on Sei Network. It includes balance analysis, risk assessment, conditional actions, and comprehensive reporting.",
    "variables": {
      "minBalanceThreshold": {
        "type": "string",
        "description": "Minimum SEI balance required for DeFi operations",
        "default": "1.0",
        "required": true
      },
      "transactionAmount": {
        "type": "string",
        "description": "Amount of SEI to send to DeFi contract",
        "default": "0.1",
        "required": true
      },
      "defiContractAddress": {
        "type": "string",
        "description": "DeFi contract address for testing (should be a safe testnet contract)",
        "default": "0x1234567890123456789012345678901234567890",
        "required": true
      }
    }
  }
}